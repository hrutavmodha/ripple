import { describe, it, expect } from 'vitest';
import { render } from 'ripple/server';
import { effect } from 'ripple';

describe('server-side effect', () => {
	it('should run effects on the server', async () => {
		component SSRComponent() {
			let message = 'initial';

			effect(() => {
				message = 'updated by effect';
			});

			<div>{message}</div>
		}

		const { body } = await render(SSRComponent);
		expect(body).toBe('<div>updated by effect</div>');
	});
});